# name: test/sql/aggregate/having/test_scalar_having.test
# description: Test HAVING clause without GROUP BY
# group: [having]

# CONTROVERSIAL: HAVING without GROUP BY works in PostgreSQL, but not in SQLite
# scalar HAVING queries
# constants only
query I
SELECT 42 HAVING 42 > 20
----
42

query I
SELECT 42 HAVING 42 > 80
----

# aggregates
query R
SELECT SUM(42) HAVING AVG(42) > MIN(20)
----
42.000000

query R
SELECT SUM(42) HAVING SUM(42) > SUM(80)
----

query RI
SELECT SUM(42)+COUNT(*)+COUNT(1), 3 HAVING SUM(42)+MAX(20)+AVG(30) > SUM(120)-MIN(100)
----
44.000000	3

# subqueries
query R
SELECT SUM(42) HAVING (SELECT SUM(42)) > SUM(80)
----

